(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1661:(e,t,n)=>{Promise.resolve().then(n.bind(n,3502))},3502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var l=n(5155),i=n(5083),a=n(5541);let o=a.sh.createBlockDefinitionsFromJsonArray([{type:"io_read_line",tooltip:"Read Line",helpUrl:"",message0:"read line",output:"String",colour:270}]);a.sh.defineBlocks(o),Object.assign({},o);var s=n(2115);class r extends a.jZ{getReservedWords(){return this.RESERVED_WORDS_}getDefinitions(){return this.definitions_||{}}setDefinitions(e){this.definitions_=e}setFunctionNames(e){this.functionNames_=e}resetNameDB(){this.nameDB_&&this.nameDB_.reset()}quote_(e){return'"'.concat(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'"')}}let c=new r("Ruby"),d={ATOMIC:0,NONE:99};for(let[e,t]of(c.init=e=>{c.nameDB_=new a.fS(c.getReservedWords()),c.nameDB_.setVariableMap(e.getVariableMap()),c.setDefinitions(Object.create({})),c.setFunctionNames(Object.create({}))},c.finish=e=>{let t=Object.values(c.getDefinitions()||{}).join("\n");return c.resetNameDB(),[t,e].filter(Boolean).join("\n\n")},c.scrub_=(e,t)=>{var n;let l=e.getCommentText(),i=l?c.prefixLines("# ".concat(l),""):"",a=null==(n=e.nextConnection)?void 0:n.targetBlock();return i+t+(a?c.blockToCode(a):"")},Object.entries({io_read_line:()=>["gets.chomp",d.ATOMIC],variables_set:(e,t)=>{let n=t.valueToCode(e,"VALUE",d.NONE)||"0";return t.getVariableName(e.getFieldValue("VAR"))+" = "+n+"\n"}})))c.forBlock[e]=t;var b=n(3603);let u=(0,n(5028).default)(()=>n.e(215).then(n.bind(n,9215)),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function f(){let e=(0,s.useRef)(null),{workspace:t}=(0,i.P2)({ref:e,initialXml:"<xml></xml>",toolboxConfiguration:m,workspaceConfiguration:{}}),[n,a]=(0,s.useState)(!1),[o,r]=(0,s.useState)(""),d=(0,s.useCallback)(()=>{if(!t)return;console.log("Generating code from Blockly workspace:",t);let e=c.workspaceToCode(t);r("# Generated for AtCoder A\n".concat(e)),a(!0)},[t]),f=(0,s.useCallback)(()=>{o&&(console.log(o),navigator.clipboard.writeText(o))},[o]);return(0,l.jsxs)("div",{className:"h-dvh flex flex-col",children:[(0,l.jsxs)("header",{className:"p-2 flex justify-between border-b",children:["Ruby Block Editor",(0,l.jsx)("button",{className:"rounded-lg",onClick:()=>d(),children:"Gen Ruby Code"})]}),(0,l.jsx)("div",{className:"flex-1 z-0",children:(0,l.jsx)("div",{ref:e,className:"w-full h-full"})}),(0,l.jsx)("footer",{className:"fixed inset-x-0 bottom-0 bg-black border-t flex gap-2 p-2",style:{paddingBottom:"calc(env(safe-area-inset-bottom) + 8px)"},children:(0,l.jsx)("button",{className:"flex-1 h-12 rounded-lg",onClick:()=>d(),children:"コード表示"})}),n&&(0,l.jsxs)("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[(0,l.jsxs)("div",{className:"p-2 flex items-center justify-between border-b bg-black",style:{paddingBottom:"calc(env(safe-area-inset-bottom)/4)"},children:[(0,l.jsx)("span",{children:"Ruby コード"}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)("button",{onClick:f,children:"コピー"}),(0,l.jsx)("button",{onClick:()=>a(!1),children:"閉じる"})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,l.jsx)(u,{value:o,className:"h-full bg-gray-100 text-gray-800",extensions:[b.Lz.editable.of(!1),b.Lz.lineWrapping],basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1,foldGutter:!0,lineNumbers:!0},readOnly:!0,theme:void 0})})]})]})}let m='\n<xml>\n  <category name="IO">\n    <block type="io_read_line"/>\n\x3c!--    <block type="io_puts"/>--\x3e\n  </category>\n  <category name="値/演算">\n\x3c!--    <block type="math_number"/>--\x3e\n    <block type="variables_set"/>\n\x3c!--    <block type="variables_get"/>--\x3e\n\x3c!--    <block type="math_arithmetic"/>--\x3e\n\x3c!--    <block type="logic_compare"/>--\x3e\n\x3c!--    <block type="text_join"/>--\x3e\n  </category>\n\x3c!--  <category name="制御">--\x3e\n\x3c!--    <block type="controls_if"/>--\x3e\n\x3c!--  </category>--\x3e\n</xml>\n'}},e=>{e.O(0,[79,263,754,441,964,358],()=>e(e.s=1661)),_N_E=e.O()}]);